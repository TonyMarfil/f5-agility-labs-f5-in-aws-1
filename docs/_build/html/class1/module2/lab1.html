<!DOCTYPE html>
<head>
  
  <!--STAGING:-->
  <script src="https://assets.adobedtm.com/50164577268f481934e5d57dbfb78f929164cd0d/satelliteLib-ea775cfabef5fca8b04e9392f20c986c0724a7c3-staging.js"></script>
  <!--Production:-->
  <script src="https://assets.adobedtm.com/50164577268f481934e5d57dbfb78f929164cd0d/satelliteLib-ea775cfabef5fca8b04e9392f20c986c0724a7c3.js"></script>
    <title>2.2.1. Explore the F5 / AWS lab environment</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="kb_doc_type" content="Manual"/>
  <meta name="kb_doc_type" content="User Guide"/>
  <meta name="title" content="2.2.1. Explore the F5 / AWS lab environment"/>
  <meta name="product" content="Public Cloud Architectures I: Deploying F5 BIG-IP Virtual Edition in AWS"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="None"/>
  <meta name="archived" content="Archived documents excluded"/>

  
  
  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">
 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text"> jQuery.noConflict(true)</script>

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2.2.1. Explore the F5 / AWS lab environment &#8212; Public Cloud Architectures I: Deploying F5 BIG-IP Virtual Edition in AWS  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5_agility_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.3. Explore the F5 Big-IP Virtual Editions Deployed" href="../module3/module3.html" />
    <link rel="prev" title="2.2. Exploring AWS" href="module2.html" />
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>
    </div>
    <div id="sidebar" class="section-nav">
      <nav class="nav-sidebartoc">
        <h5>Public Cloud Architectures I: Deploying F5 BIG-IP Virtual Edition in AWS  documentation </h5>
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <h5>Current Page</h5>
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">2.2.1. Explore the F5 / AWS lab environment</a></li>
<li><a class="reference internal" href="#cloudformation">2.2.2. CloudFormation</a></li>
<li><a class="reference internal" href="#ec2">2.2.3. EC2</a></li>
<li><a class="reference internal" href="#vpc">2.2.4. VPC</a></li>
<li><a class="reference internal" href="#github">2.2.5. Github</a></li>
</ul>

         </span>
        <hr>
        <h5>Site Contents</h5>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class1.html">2. Class - Public Cloud Architectures I: Deploying F5 BIG-IP Virtual Edition in AWS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../module1/module1.html">2.1. Infrastructure As Code</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="module2.html">2.2. Exploring AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module3/module3.html">2.3. Explore the F5 Big-IP Virtual Editions Deployed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module4/module4.html">2.4. Extending and Securing your Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module5/module5.html">2.5. Logging to CloudWatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module6/module6.html">2.6. Autoscale WAF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module7/module7.html">2.7. Clean Up Environment</a></li>
</ul>
</li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>

  
  <div class="main active" id="content">
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">Community Training Classes &amp; Labs</a> &gt; <a href="../../index.html">Public Cloud Architectures I: Deploying F5 BIG-IP Virtual Edition in AWS </a> &gt; 2.2.1. Explore the F5 / AWS lab environment</li>
          </ul>
      </nav>
      
      

    
  <div class="section" id="explore-the-f5-aws-lab-environment">
<h1>2.2.1. Explore the F5 / AWS lab environment<a class="headerlink" href="#explore-the-f5-aws-lab-environment" title="Permalink to this headline">¶</a></h1>
<p>Your instructor will share a view of the Big-IQ License Manager hosted on AWS. The class will see all of the instances dynamically licensed through Big-IQ.</p>
<p>When deploying to AWS you have flexible licensing options:</p>
<ul class="simple">
<li>Bring Your Own License (BYOL) - Can be transferred from one Virtual Edition environment to another (i.e. VMWare =&gt; AWS)</li>
<li>Hourly - Launch an instance from the AWS self-service Marketplace portal and pay only for metered hourly use.</li>
<li>Subscription - <strong>This is the option used in this lab</strong>. Every Big-IP launched will query the Big-IQ License Manager for a license. From Big-IQ we can revoke licenses as well.</li>
<li>Enterprise License Agreement</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Below is a snapshot of the Big-IQ License Manager dynamically licensing devices in AWS. You’re instructor can show this to the class during a lab session.</p>
</div>
<a class="reference internal image-reference" href="../../_images/0a_bigiq_licenses.png"><img alt="../../_images/0a_bigiq_licenses.png" src="../../_images/0a_bigiq_licenses.png" style="width: 960.0px; height: 540.0px;" /></a>
<p>Launch the Firefox browser. Click on the bookmark for the Amazon AWS Console link in the upper-left-hand corner. Login with emailid as the username and shortUrl as password.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Account:</td>
<td>f5agility2018</td>
</tr>
<tr class="row-odd"><td>User Name:</td>
<td><a class="reference external" href="mailto:userxx&#37;&#52;&#48;f5lab&#46;com">userxx<span>&#64;</span>f5lab<span>&#46;</span>com</a>, change xx to your student number</td>
</tr>
<tr class="row-even"><td>Password:</td>
<td>sames as shortUrl / echo $shortUrl</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../_images/1_aws_console_login.png"><img alt="../../_images/1_aws_console_login.png" src="../../_images/1_aws_console_login.png" style="width: 960.0px; height: 540.0px;" /></a>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">In the upper right-hand corner, ensure you are in the correct region. For example: N. Virginia region (us-east-1) is the default.</p>
</div>
<a class="reference internal image-reference" href="../../_images/2_region_check.png"><img alt="../../_images/2_region_check.png" src="../../_images/2_region_check.png" style="width: 960.0px; height: 540.0px;" /></a>
</div>
<div class="section" id="cloudformation">
<h1>2.2.2. CloudFormation<a class="headerlink" href="#cloudformation" title="Permalink to this headline">¶</a></h1>
<p>Navigate to Services =&gt; Management Tools =&gt; CloudFormation. In the search field type your user account name (i.e user99). You should see your CloudFormation deployment details. You launched two CloudFormation templates.</p>
<a class="reference internal image-reference" href="../../_images/3_cloudformation_stacks.png"><img alt="../../_images/3_cloudformation_stacks.png" src="../../_images/3_cloudformation_stacks.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>ha-userxxf5labcom-vpc-xxxxxxxx - Is the Cross-Availability-Zone deployment well documented in the F5 Github repository:
<a class="reference external" href="https://github.com/F5Networks/f5-aws-cloudformation/tree/master/supported/failover/across-net/via-api/3nic/existing-stack/bigiq">https://github.com/F5Networks/f5-aws-cloudformation/tree/master/supported/failover/across-net/via-api/3nic/existing-stack/bigiq</a></li>
</ul>
<a class="reference internal image-reference" href="../../_images/cft_cross-az-ha.png"><img alt="../../_images/cft_cross-az-ha.png" src="../../_images/cft_cross-az-ha.png" style="width: 471.0px; height: 320.0px;" /></a>
<ul class="simple">
<li>waf-userXXf5labcom-vpc-xxxxxxxx - Is the Autoscale WAF deployment well documented in the F5 Github repository:
<a class="reference external" href="https://github.com/F5Networks/f5-aws-cloudformation/tree/master/supported/autoscale/waf/via-lb/1nic/existing-stack/bigiq">https://github.com/F5Networks/f5-aws-cloudformation/tree/master/supported/autoscale/waf/via-lb/1nic/existing-stack/bigiq</a></li>
</ul>
<a class="reference internal image-reference" href="../../_images/cft_autoscale_waf.png"><img alt="../../_images/cft_autoscale_waf.png" src="../../_images/cft_autoscale_waf.png" style="width: 485.0px; height: 310.0px;" /></a>
<ul class="simple">
<li>Click the Events tab. The F5 CloudFormation template records every successful or failed event here. Look for the final “CREATE_COMPLETE” at the top. This indicates all went well.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/5_cft_events.png"><img alt="../../_images/5_cft_events.png" src="../../_images/5_cft_events.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click on the Outputs tab. When CloudFormation deployments complete successfully, they can export key value pairs you can use to integrate other automation tools. For example, you can query these CloudFormation outputs to find out to which region, availability zone, private IPs, public IPs your F5 Big-IP Virtual Edition instance has been assigned.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/6_cft_outputs.png"><img alt="../../_images/6_cft_outputs.png" src="../../_images/6_cft_outputs.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click on the Resources tab. Here we see a map (resource type to unique id) of all the AWS resources that were deployed from the CloudFormation template.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/7_cft_resources.png"><img alt="../../_images/7_cft_resources.png" src="../../_images/7_cft_resources.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click the Events tab. The F5 CloudFormation template records every successful or failed event here. Look for the final “CREATE_COMPLETE” at the top. This indicates all went well.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/8_cft_events.png"><img alt="../../_images/8_cft_events.png" src="../../_images/8_cft_events.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click on the Parameters tab. We used terraform to stuff all of the necessary parameters into the CloudFormation template. Here you can see the CloudFormation parameter name and value provided.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/9_cft_parameters.png"><img alt="../../_images/9_cft_parameters.png" src="../../_images/9_cft_parameters.png" style="width: 960.0px; height: 540.0px;" /></a>
</div>
<div class="section" id="ec2">
<h1>2.2.3. EC2<a class="headerlink" href="#ec2" title="Permalink to this headline">¶</a></h1>
<p>Navigate to Services =&gt; Compute =&gt; EC2 =&gt; INSTANCES =&gt; Instances. Enter your username in the search field (i.e. user99). The web application is hosted on webaz1.0 in one availability zone and webaz2.0 in another availability zone. Highlight web-az1.0.</p>
<a class="reference internal image-reference" href="../../_images/10_ec2_instances.png"><img alt="../../_images/10_ec2_instances.png" src="../../_images/10_ec2_instances.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>In the “Description” tab below, note the availability zone. Highlight web-az2.0 and do the same.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/11_ec2_instance_description.png"><img alt="../../_images/11_ec2_instance_description.png" src="../../_images/11_ec2_instance_description.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Take a look at the tags big-IP1-ha… has been assigned. In public cloud deployments you can use tags (key-value pairs) to group your devices.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/12_ec2_instance_tags.png"><img alt="../../_images/12_ec2_instance_tags.png" src="../../_images/12_ec2_instance_tags.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Cloud-init. Version 13 of Big-IP supports cloud-init. Right click on BIGIP1 =&gt; Instance Settings =&gt; View/Change User Data. Cloud-init is the industry standard way to inject commands into an F5 cloud image to automate all aspects of the on-boarding process: <a class="reference external" href="https://cloud-init.io/">https://cloud-init.io/</a>.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/13_cloud_init.png"><img alt="../../_images/13_cloud_init.png" src="../../_images/13_cloud_init.png" style="width: 960.0px; height: 540.0px;" /></a>
<p>Navigate to Services =&gt; Compute =&gt; EC2 =&gt; # Key Pairs. Type your username in the search field (i.e. user99). You will see the ssh key that was created for you and upload to AWS. By default, F5 Big-IP VE appliances deployed to AWS do not have any default root or admin account access. You have to enable or create these accounts. Initially, you can only connect via ssh using your private key. From the Super-NetOps terminal, see if you can find the private key in your home directory.</p>
<a class="reference internal image-reference" href="../../_images/14_keypair.png"><img alt="../../_images/14_keypair.png" src="../../_images/14_keypair.png" style="width: 960.0px; height: 540.0px;" /></a>
<p>Navigate to Services =&gt; Compute =&gt; EC2 =&gt; LOAD BALANCING =&gt; Load Balancers. In the search filter enter your username. You should see two load balancers. One named tf-elb-* is your newly created AWS load balancer.</p>
<a class="reference internal image-reference" href="../../_images/15_elb_description.png"><img alt="../../_images/15_elb_description.png" src="../../_images/15_elb_description.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Highlight the ‘Description’ tab. Note:<ul>
<li>Scheme: internet-facing</li>
<li>Type: Classic</li>
</ul>
</li>
</ul>
<a class="reference internal image-reference" href="../../_images/16_elb_instances.png"><img alt="../../_images/16_elb_instances.png" src="../../_images/16_elb_instances.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click the “Health Check” tab =&gt; [Edit health Check]. The classic load-balancer is limited to basic health checks.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/17_elb_health_checks_limited.png"><img alt="../../_images/17_elb_health_checks_limited.png" src="../../_images/17_elb_health_checks_limited.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click the “Listeners” tab =&gt; [Edit]. The classic load-balancer is limited to HTTP, HTTPS, TCP and SSL (no UDP).</li>
</ul>
<a class="reference internal image-reference" href="../../_images/18_elb_listeners_limited.png"><img alt="../../_images/18_elb_listeners_limited.png" src="../../_images/18_elb_listeners_limited.png" style="width: 960.0px; height: 540.0px;" /></a>
<p>Navigate to Services =&gt; Compute =&gt; EC2 =&gt; AUTO SCALING =&gt; Auto Scaling Group. Highlight the “Activity History” tab. You can the autoscale WAF CloudFormation template created an auto scaling group. Read the Description and Cause.</p>
<a class="reference internal image-reference" href="../../_images/19_asg_activity.png"><img alt="../../_images/19_asg_activity.png" src="../../_images/19_asg_activity.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click the “Scaling Policies” tab. Read through the polices to understand how the autoscale WAF deployment is programmed to both scale out during a surge and scale in when the surge subsides.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/20_asg_scaling_policies.png"><img alt="../../_images/20_asg_scaling_policies.png" src="../../_images/20_asg_scaling_policies.png" style="width: 960.0px; height: 540.0px;" /></a>
<ul class="simple">
<li>Click the “Instances” tab. The single instance running the F5 WAF. Notice the instance is “Protected from: Scale in”. This means that AWS will guarantee a minimum of one F5 WAF instance is running at all times. If someone where to accidentally stop or terminate an instance, this policy would automatically trigger the creation of a new one.</li>
</ul>
<a class="reference internal image-reference" href="../../_images/21_asg_instances.png"><img alt="../../_images/21_asg_instances.png" src="../../_images/21_asg_instances.png" style="width: 960.0px; height: 540.0px;" /></a>
</div>
<div class="section" id="vpc">
<h1>2.2.4. VPC<a class="headerlink" href="#vpc" title="Permalink to this headline">¶</a></h1>
<p>Navigate to Services =&gt; Networking &amp; Content Deliver =&gt; VPC. click on VPCs. Enter your username in the search filter (i.e. user99). This is the Virtual Private Cloud (VPC) that has been dedicated to your lab environment.
Select the Summary tab. You can see the IPv4 CIDR assigned is 10.0.0.0/16. Your on-premises datacenter has been assigned 10.1.0.0/16 to not conflict.</p>
<a class="reference internal image-reference" href="../../_images/22_vpc.png"><img alt="../../_images/22_vpc.png" src="../../_images/22_vpc.png" style="width: 960.0px; height: 540.0px;" /></a>
</div>
<div class="section" id="github">
<h1>2.2.5. Github<a class="headerlink" href="#github" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Fully supported F5 Networks Solutions are hosted in the official F5 Networks GitHub repository: <a class="reference external" href="https://github.com/f5networks">https://github.com/f5networks</a></li>
<li>We are running the lab from the F5 Super-NetOps container: <a class="reference external" href="https://github.com/f5devcentral/f5-super-netops-container">https://github.com/f5devcentral/f5-super-netops-container</a></li>
<li>AWS CloudFormation templates: <a class="reference external" href="https://github.com/F5Networks/f5-aws-cloudformation">https://github.com/F5Networks/f5-aws-cloudformation</a></li>
<li>Native template formats are also available for Microsoft Azure (arm templates): <a class="reference external" href="https://github.com/F5Networks/f5-azure-arm-templates">https://github.com/F5Networks/f5-azure-arm-templates</a></li>
<li>Native template formats are also available for Google Cloud Platform (gdm templates): <a class="reference external" href="https://github.com/F5Networks/f5-google-gdm-templates">https://github.com/F5Networks/f5-google-gdm-templates</a></li>
</ul>
<a class="reference internal image-reference" href="../../_images/f5-github.png"><img alt="../../_images/f5-github.png" src="../../_images/f5-github.png" style="width: 689.5px; height: 665.0px;" /></a>
</div>



    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="module2.html" title="2.2. Exploring AWS" accesskey="p" class="btn btn-primary pull-left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../module3/module3.html" title="2.3. Explore the F5 Big-IP Virtual Editions Deployed" accesskey="n" class="btn btn-primary pull-right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    jQuery.noConflict(true)
  </script>
  <script src="../../_static/js/clouddocs.js"></script>
  </body>
</html>